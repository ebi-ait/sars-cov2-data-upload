<nav class="navbar">
  <!-- logo -->
  <div class="navbar-brand">
    <a class="navbar-item">
      <img src="assets/images/sars_logo.png">
    </a>
  </div>
</nav>

<div class="boxes">
  <a>
    <img src="assets/images/data_uploader.png" class="boxes">
  </a>
</div>

<div class="upload-details">
    <mat-form-field class="upload-details-form-field">
        <mat-label>Email</mat-label>
        <label>
            <input type="text" [(ngModel)]="email" matInput required>
        </label>
        <button (click)="email=''" *ngIf="email" aria-label="Clear" mat-button mat-icon-button matSuffix>
            <mat-icon>close</mat-icon>
        </button>
    </mat-form-field>

    <mat-form-field class="upload-details-form-field">
        <mat-label>Upload Area</mat-label>
        <label>
            <input [(ngModel)]="folder" [attr.disabled]="tbDisabled ? '' : null" matInput required type="text">
        </label>
        <button mat-button *ngIf="folder" matSuffix mat-icon-button aria-label="Clear" (click)="folder=''">
            <mat-icon>close</mat-icon>
        </button>
    </mat-form-field>

    <div class="upload-details-button-row">
        <button mat-raised-button color="primary" (click)="onLoading()" [disabled]="!folder || !email">Proceed</button>
        <button mat-raised-button (click)="onReset()" [disabled]="!folder || !email">Reset</button>
    </div>
</div>


<h4 *ngIf="!toShow">The upload area entered by you doesn't exist, please enter a valid upload area</h4>

<!--<div *ngIf="isValid" class="boxes">-->
<div *ngIf="true" class="upload-details">
    <ngx-dropzone (change)="onSelect($event)" class="upload-area">
        <ngx-dropzone-label>Drag n' drop some files here, or click to select files</ngx-dropzone-label>
        <ngx-dropzone-preview *ngFor="let f of files" [removable]="true" (removed)="onRemove(f)">
            <ngx-dropzone-label>{{ f.name }} - {{ f.size }} bytes</ngx-dropzone-label>
        </ngx-dropzone-preview>
    </ngx-dropzone>

    <div class="upload-details-button-row">
    <button (click)="folder && files.length && onUpload()" [disabled]="!folder" color="primary" mat-raised-button>
        Upload Files
    </button>
    </div>
</div>

<div *ngIf="getUploadedFiles().length && toShow">
    <h3>Uploaded Files</h3>
    <table class="full-width">
        <tr *ngFor="let file of getUploadedFiles()">
            <td>{{ file.name }}</td>
            <td>
                <progress-bar [progress]="file.percentage"
                    [color-degraded]="{'0': '#007bff', '100': '#28a745'}"></progress-bar>
            </td>
        </tr>
    </table>

  <h4 *ngIf="getUploadedFiles().length && isValid">
      <label class="compulsory">Notes: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
      <input type = "text" [(ngModel)]="notes" class="folder-input" maxlength="100"/> (max 100 characters)
      <br/><br/>
    <button type="button" class="button" (click)="sendEmail()" [disabled]="!folder">Submit</button>
  </h4>
</div>

<!--<div *ngIf=toLoad>
  <h3>Already uploaded Files</h3>
  <table class="full-width">
    <tr *ngFor="let file of loadList()">
      <td>{{ file.name }}</td>
    </tr>
  </table>
</div>-->
